<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch∆∞∆°ng tr√¨nh ƒëi·ªÅu khi·ªÉn v√† gi√°m s√°t hi·ªáu su·∫•t ph√¢n lo·∫°i s·∫£n ph·∫©m</title>
    <link rel="icon" href="images/logo/logo.jpg" type="image/x-icon">

    <link rel="stylesheet" href="css/login.css">
    <link rel="stylesheet" href="css/screen_control.css">
    <link rel="stylesheet" href="css/screen_giamsat.css">
    <link rel="stylesheet" href="css/screen_canhbao.css">
    <link rel="stylesheet" href="css/screen_checktrangthai.css">
    <link rel="stylesheet" href="css/slidebar.css">
    <link rel="stylesheet" href="css/screen_user.css">

    <script src = "socket.io/socket.io.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src = "js/FC1_Common.js"></script>
    <script src="js/FC2_UserManager.js"></script>
    <script defer src="js/FC3_Quantity.js"></script>
    <script defer src="js/FC4_Check.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
   
    <script>
        var socket = io("127.0.0.1:3000");
    </script>

    <!-- ////////////// CH∆Ø∆†NG TR√åNH ƒêƒÇNG NH·∫¨P H·ªÜ TH·ªêNG //////////////  -->
    <div id="div_login">
        <div id="id01" class="modal">
            <form id = "modal-content1" class="modal-content animate">
            <div id = "img_container" class="imgcontainer">
                <img decoding="async" id = "img_avatar" src="images/User/Users.jpg" alt="Avatar" class="avatar">
            </div>

            <div id = "log_container" class="container">
                <label for="uname"><b>T√™n ƒëƒÉng nh·∫≠p ho·∫∑c s·ªë ƒëi·ªán tho·∫°i</b></label>
                <input id = "inputuser" type="text" placeholder="Nh·∫≠p t√™n ƒëƒÉng nh·∫≠p ho·∫∑c s·ªë ƒëi·ªán tho·∫°i" name="uname" required>

                <label for="psw"><b>M·∫≠t kh·∫©u</b></label>
                <input id = "inputpass" type="password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u" name="psw" required>

                <button id = "bttlogin1" type="button" onclick="login();">ƒêƒÉng nh·∫≠p</button>
                <label>
                <input type="checkbox" checked="checked" id="rememberMe" name="remember"> Ghi nh·ªõ ƒëƒÉng nh·∫≠p
                </label>
            </div>

            <div id = "login_container" class="container" style="background-color:#f1f1f1">
                <button id = "bttcancle" type="button" onclick="document.getElementById('id01').style.display='none'; logout();" class="cancelbtn">H·ªßy</button>
                <span id = "psw" class="psw" onclick="document.getElementById('id01').style.display='none'; document.getElementById('fogot_pwd').style.display='block';">Qu√™n m·∫≠t kh·∫©u?</span>
                <span id="create_acc">Ch∆∞a c√≥ t√†i kho·∫£n ? <span style="color: green; cursor: pointer;" onclick="document.getElementById('id01').style.display='none'; document.getElementById('create_account').style.display='block';">T·∫°o t√†i kho·∫£n m·ªõi</span></span>
            </div>
            </form>
        </div>
        <!-- Ph·∫ßn qu√™n m·∫≠t kh·∫©u -->
        <div id="fogot_pwd" class="modal" style="display:none;">
            <form id = "modal-content2" class="modal-content animate">
                <div id = "img_container" class="imgcontainer">
                    <span id = "closebtt" onclick="document.getElementById('id01').style.display='block'; document.getElementById('fogot_pwd').style.display='none';" class="close" title="Close Modal">√ó</span>
                    <img decoding="async" id = "img_avatar" src="images/User/Users.jpg" alt="Avatar" class="avatar">
                </div>
                <center>
                    <h2>Qu√™n m·∫≠t kh·∫©u</h2>
                    <p>S·ªë ƒëi·ªán tho·∫°i c·ªßa b·∫°n ƒë·ªÉ nh·∫≠n m√£ OTP ƒë·∫∑t l·∫°i m·∫≠t kh·∫©u</p>
                    <label for="phone">S·ªë ƒëi·ªán tho·∫°i:</label>
                    <input type="tel" id="phone_forget" name="phone" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i" required></br>
                    <label for="new_password">M·∫≠t kh·∫©u:</label>
                    <input type="password" id="new_password_foget" name="new_password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u m·ªõi"></br>
                    <label for="new_otp_foget">M√£ OTP:</label>
                    <input id="otpInput_forget" placeholder="Nh·∫≠p m√£ OTP" />
                    <button id="sendOtpBtn_foget" onclick="sendOtp_forget()">g·ª≠i m√£ OTP</button>
                    <span id="countdown_forget" style="margin-left: 10px;"></span></br>
                    <button type="button" onclick="verifyOtp_forget();">X√°c nh·∫≠n</button>
                </center>
            </form>
        </div>
        <!-- Ph·∫ßn t·∫°o t√†i kho·∫£n m·ªõi -->
        <div id="create_account" class="modal" style="display:none;">
            <form id = "modal-content3" class="modal-content animate">
                <div id = "img_container" class="imgcontainer">
                    <span id = "closebtt" onclick="document.getElementById('id01').style.display='block'; document.getElementById('create_account').style.display='none';" class="close" title="Close Modal">√ó</span>
                    <img decoding="async" id = "img_avatar" src="images/User/Users.jpg" alt="Avatar" class="avatar">
                </div>
                <center>
                    <h2>T·∫°o t√†i kho·∫£n m·ªõi</h2>
                    <form id="create_account_form">
                        <label for="new_phone">S·ªë ƒëi·ªán tho·∫°i:</label>
                        <input type="tel" id="new_phone" name="new_phone" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i" required></br>
                        <label for="new_name">T√™n ƒëƒÉng nh·∫≠p:</label>
                        <input type="text" id="new_name" name="new_name" placeholder="Nh·∫≠p t√™n ƒëƒÉng nh·∫≠p" required></br>
                        <label for="new_password">M·∫≠t kh·∫©u:</label>
                        <input type="password" id="new_password" name="new_password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u"></br>
                        <label for="new_otp">M√£ OTP:</label>
                        <input id="otpInput" placeholder="Nh·∫≠p m√£ OTP" />
                        <button id="sendOtpBtn" onclick="sendOtp()">g·ª≠i m√£ OTP</button>
                        <span id="countdown" style="margin-left: 10px;"></span></br>
                        <button type="button" onclick="verifyOtp()">T·∫°o t√†i kho·∫£n</button>
                    </form>
                </center>
            </form>
        </div>
        <!-- Ph·∫ßn ƒë·ªïi m·∫≠t kh·∫©u -->
        <div id="change_password" class="modal" style="display:none;">
            <form id = "modal-content4" class="modal-content animate">
                <div id = "img_container" class="imgcontainer">
                    <span id = "closebtt" onclick="document.getElementById('change_password').style.display='none';">√ó</span>
                    <img decoding="async" id = "img_avatar" src="images/User/Users.jpg" alt="Avatar" class="avatar">
                </div>
                <center>
                    <h2>üîê ƒê·ªïi m·∫≠t kh·∫©u</h2>
                    <form id="create_account_form" onsubmit="changepassword(event)">
                        <label for="old_password">M·∫≠t kh·∫©u c≈©:</label>
                        <input type="password" id="oldPass" placeholder="üîí M·∫≠t kh·∫©u hi·ªán t·∫°i" required /></form></br>
                        <label for="new_password">M·∫≠t kh·∫©u m·ªõi:</label>
                        <input type="password" id="newPass" placeholder="üÜï M·∫≠t kh·∫©u m·ªõi" required /></br>
                        <label for="reply_password">X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi:</label>
                        <input type="password" id="confirmPass" placeholder="‚úÖ X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi" required /></br>
                        <button type="submit" onclick="changepassword()">ƒê·ªïi m·∫≠t kh·∫©u</button>
                        <div class="note">üìå ƒê·∫£m b·∫£o m·∫≠t kh·∫©u ƒë·ªß m·∫°nh v√† d·ªÖ nh·ªõ!</div>
                    </form>
                </center>
            </form>
        </div>
    </div>

</head>
<!-- Ph·∫ßn th√¢n c·ªßa website -->
<body>
<!-- ////////////// Code cho slidebar////////////// -->
    <div id = "slidebar">
        <button id="btnchangepass" class="btn" onclick="document.getElementById('change_password').style.display = 'block'";
        >ƒê·ªîI M·∫¨T KH·∫®U</button>
        <!--N√∫t ƒëƒÉng nh·∫≠p/ƒëƒÉng xu·∫•t-->
        <button id="bttLogin" class="btn" onclick="
        window.location.reload();
        ">ƒêƒÇNG NH·∫¨P</button>
        <button id="bttLogout" class="btn" onclick="logout();
        ">ƒêƒÇNG XU·∫§T</button>
        <!--N√∫t ch·ªçn m√†n h√¨nh ch√≠nh-->
        <button id="btt_Screen_Main" onclick="
            fn_ScreenChange('Screen_Main','Screen_1','Screen_2', 'Screen_3', 'Screen_4');
        ">M√ÄN H√åNH ƒêI·ªÄU KI·ªÇN</button>
        <!--N√∫t ch·ªçn m√†n h√¨nh 1-->
        <button id="btt_Screen_1" onclick="
            fn_ScreenChange('Screen_1','Screen_Main','Screen_2', 'Screen_3', 'Screen_4');
            getDataAndDrawCharts();
        ">M√ÄN H√åNH GI√ÅM S√ÅT</button>
        <!--N√∫t ch·ªçn m√†n h√¨nh 2-->
        <button id="btt_Screen_2" onclick="
            fn_ScreenChange('Screen_2','Screen_Main','Screen_1', 'Screen_3', 'Screen_4'); 
        ">M√ÄN H√åNH C·∫¢NH B√ÅO</button>
        <button id="btt_Screen_3" onclick="
            fn_ScreenChange('Screen_3','Screen_Main','Screen_1', 'Screen_2', 'Screen_4');
        ">M√ÄN H√åNH QU·∫¢N L√ç ƒê∆†N H√ÄNG</button>
        <button id="btt_Screen_4" style="display:none" onclick="
            fn_ScreenChange('Screen_4','Screen_Main','Screen_1', 'Screen_2', 'Screen_3'); loadUsers();
        ">M√ÄN H√åNH QU·∫¢N L√ç NG∆Ø·ªúI D√ôNG</button>
    </div>

<!-- //////////////Code cho m√†n h√¨nh gi√°m s√°t////////////// -->
    <div id = "Screen_1">
        <p style="float: right;color:rgb(52, 51, 51);">C·∫≠p nh·∫≠t l·∫ßn cu·ªëi: <span id="last_update"></span></p></br>
        <div class="dashboard">
            <!-- Bi·ªÉu ƒë·ªì t·ª∑ l·ªá chia ch·ªçn -->
            <div class="card">
                <div class="filter">
                    <label>Bi·ªÉu ƒë·ªì t·ª∑ l·ªá chia ch·ªçn h·ªá th·ªëng h√¥m nay</label>
                </div>
                <div class="chart-container">
                    <canvas id="piechart"></canvas>
                </div>
            </div>

            <!-- Bi·ªÉu ƒë·ªì s·∫£n l∆∞·ª£ng ƒë·∫ßu c·∫•p -->
            <div class="card">
            <label>Bi·ªÉu ƒë·ªì s·∫£n l∆∞·ª£ng ƒë·∫ßu c·∫•p h√¥m nay</label>
            <div class="chart-container">
                <canvas id="columnchart"></canvas>
            </div>
            </div>

            <!-- L·ªãch s·ª≠ ph√¢n lo·∫°i h√†ng -->
            <div class="card" style="grid-column: span 2">
            <div class="filter">
                <label>L·ªãch s·ª≠ ph√¢n lo·∫°i h√†ng</label><br/>
                <input id="check_day" type="radio" name="range" checked /> Theo ng√†y
                <input id="check_month" type="radio" name="range" /> Theo th√°ng
                <input id="check_year" type="radio" name="range" /> Theo nƒÉm
                &nbsp; T·ª´ <input id="start_date" type="date"/>
                ƒê·∫øn <input id="end_date" type="date"/>
            </div>
            <div class="chart-container">
                <canvas id="historychart" height="230px"></canvas>
            </div>
            </div>
        </div>
    </div>
<!-- //////////////Code cho m√†n h√¨nh c·∫£nh b√°o////////////// -->
    <div id = "Screen_2">
        <label id="lb_AL_Search_Start">T·ª´:</label>
        <input id="dtpk_AL_Search_Start" type="datetime-local">
        <label id="lb_AL_Search_End">ƒê·∫øn:</label>
        <input id="dtpk_AL_Search_End" type="datetime-local">
        <button id="btt_AL_Search" class="btn" onclick="fn_Alarm_By_Time();"></i> T√åM KI·∫æM</button>
        <div id = "div_table_Alarm">
            <table id="table_Alarm" >
                <thead>
                <tr>
                    <th>Th·ªùi gian</th>
                    <th>ID c·∫£nh b√°o</th>
                    <th>Tr·∫°ng th√°i</th>
                    <th>n·ªôi dung c·∫£nh b√°o</th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
<!-- //////////////Code cho m√†n h√¨nh qu·∫£n l√≠ ƒë∆°n h√†ng ////////////// -->
     <div id="Screen_3">
        <div class="dashboard_2">
            <center class="check_QR">
                <label>Ki·ªÉm tra ƒë∆°n h√†ng ph√¢n lo·∫°i</label>
                <input id="check_QR" type="text" placeholder="Nh·∫≠p m√£ QR..." />
                <button onclick="searchOrder(check_QR.value)">T√¨m ki·∫øm</button>
                <p>M√£ QR :<span id="qr_number"></span></p>
                <p>V·ªã tr√≠ :<span id="qr_vitri"></span></p>
                <p>Th·ªùi gian ph√¢n lo·∫°i:<span id="qr_time"></span></p>
                <p>Tr·∫°ng th√°i ƒë∆°n h√†ng :<span id="qr_trangthai"></span></p>
            </center>
            <center class="Export_Excel">
                <label>Xu·∫•t danh s√°ch ph√¢n lo·∫°i</label>
                <div>
                    T·ª´ <input id="start_date_check" type="date" />
                    ƒê·∫øn <input id="end_date_check" type="date" />
                    <button onclick="fetchTable()">Tra c·ª©u</button>
                    <button id="exportExcel" onclick="exportExcel()">Xu·∫•t Excel</button>
                </div>
                <div style="max-height: 580px; overflow-y: auto;">
                    <table id="resultTable">
                        <thead>
                        <tr>
                            <th>M√£ QR</th>
                            <th>V·ªã tr√≠</th>
                            <th>Th·ªùi gian ph√¢n lo·∫°i</th>
                            <th>Tr·∫°ng th√°i ƒë∆°n h√†ng</th>
                        </tr>
                        </thead>
                        <tbody id="resultTable_content"></tbody>
                    </table>
                </div>
            </center>

        </div>
    </div>
<!-- //////////////Code cho m√†n h√¨nh qu·∫£n l√≠ user////////////// -->
    <div id="Screen_4">
        <h3 style="color: #f1f1f1;"> Xin ch√†o, Admin!</h3>
        <center>
            <h1>Danh s√°ch ng∆∞·ªùi d√πng tr√™n h·ªá th·ªëng</h1>
            <div style="max-height: 580px; overflow-y: auto;">
                <table id="userTable">
                    <thead>
                    <tr>
                        <th>T√™n ƒëƒÉng nh·∫≠p</th>
                        <th>S·ªë ƒëi·ªán tho·∫°i</th>
                        <th>M·∫≠t kh·∫©u</th>
                        <th>X√≥a ng∆∞·ªùi d√πng</th>
                    </tr>
                    </thead>
                    <tbody id="userTableBody"></tbody>
                </table>
            </div>
        </center>
    </div>
<!-- //////////////Code cho m√†n h√¨nh ch√≠nh////////////// -->
    <div id = "Screen_Main">
        <div class="control_panel">
            <h2>ƒêi·ªÅu khi·ªÉn v√† tr·∫°ng th√°i h·ªá th·ªëng</h2>
            <div class="control_panel_content">
                <div class="state_all div_button">
                    <img id="Button_1" class="button" onclick="socket.emit('Client-send-cmd-toggle', 'emergency_stop');">
                    <h4>N√∫t d·ª´ng kh·∫©n c·∫•p</h4>
                </div>
                <div class="cd_hoatdong div_button">
                    <img id = "Button_2" class="button">
                    <h4>Ch·∫ø ƒë·ªô ho·∫°t ƒë·ªông</h4>
                </div>
            </div>
        </div>    

        <img id = "Panel_electric" src="images/Symbol/Panel_electric.png">
        <img id = "Webcam">
        <img id = "Conveyor_1"><img id = "Conveyor_2"><img id = "Conveyor_3"><img id = "Motor" >
        <img id = "Sensor_detech" ><img id = "Sensor_1"><img id = "Sensor_2"><img id = "Sensor_3">
        <img id = "Sensor_4"><img id = "Sensor_5"><img id = "Xilanh_1"><img id = "Xilanh_2">
        <img id = "Xilanh_3"><img id = "Xilanh_4"><img id = "Xilanh_5">
        <img id = "mang_phanloai_1" src="images/Symbol/mang_phanloai.png">
        <img id = "mang_phanloai_2" src="images/Symbol/mang_phanloai.png">
        <img id = "mang_phanloai_3" src="images/Symbol/mang_phanloai.png">
        <img id = "mang_phanloai_4" src="images/Symbol/mang_phanloai.png">
        <img id = "mang_phanloai_5" src="images/Symbol/mang_phanloai.png">
        <img id = "slot_1" src="images/Symbol/slot.png">
        <img id = "slot_2" src="images/Symbol/slot.png">
        <img id = "slot_3" src="images/Symbol/slot.png">
        <img id = "slot_4" src="images/Symbol/slot.png">
        <img id = "slot_5" src="images/Symbol/slot.png">
    </div>
</body>
</html>

